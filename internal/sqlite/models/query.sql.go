// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: query.sql

package models

import (
	"context"
)

const logEvent = `-- name: LogEvent :one

INSERT INTO events (
  source, event
) VALUES (
  ?, ?
)
RETURNING id
`

type LogEventParams struct {
	Source int64
	Event  int64
}

// https://docs.sqlc.dev/en/latest/tutorials/getting-started-sqlite.html
func (q *Queries) LogEvent(ctx context.Context, arg LogEventParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, logEvent, arg.Source, arg.Event)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const testDictionaryPairExists = `-- name: TestDictionaryPairExists :one
SELECT EXISTS(
  SELECT 1 
  FROM dictionary
  WHERE 
    source_hash = ?
    AND
    event_hash = ?
  )
`

type TestDictionaryPairExistsParams struct {
	SourceHash int64
	EventHash  int64
}

func (q *Queries) TestDictionaryPairExists(ctx context.Context, arg TestDictionaryPairExistsParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, testDictionaryPairExists, arg.SourceHash, arg.EventHash)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const testEventPairExists = `-- name: TestEventPairExists :one
SELECT EXISTS(
  SELECT 1 
  FROM events 
  WHERE 
    source = ?
    AND
    event = ?
  )
`

type TestEventPairExistsParams struct {
	Source int64
	Event  int64
}

func (q *Queries) TestEventPairExists(ctx context.Context, arg TestEventPairExistsParams) (int64, error) {
	row := q.db.QueryRowContext(ctx, testEventPairExists, arg.Source, arg.Event)
	var column_1 int64
	err := row.Scan(&column_1)
	return column_1, err
}

const updateDictionary = `-- name: UpdateDictionary :exec
INSERT OR IGNORE INTO dictionary (
  event_source, event_name, source_hash, event_hash
) VALUES (
  ?, ?, ?, ?
)
`

type UpdateDictionaryParams struct {
	EventSource string
	EventName   string
	SourceHash  int64
	EventHash   int64
}

func (q *Queries) UpdateDictionary(ctx context.Context, arg UpdateDictionaryParams) error {
	_, err := q.db.ExecContext(ctx, updateDictionary,
		arg.EventSource,
		arg.EventName,
		arg.SourceHash,
		arg.EventHash,
	)
	return err
}
